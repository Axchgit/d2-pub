(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{315:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"菜单"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#菜单"}},[t._v("#")]),t._v(" 菜单")]),t._v(" "),a("p",[t._v("D2Admin 的顶栏菜单和侧边栏菜单相互独立互不影响。")]),t._v(" "),a("h2",{attrs:{id:"数据源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据源"}},[t._v("#")]),t._v(" 数据源")]),t._v(" "),a("p",[t._v("顶栏数据使用 "),a("code",[t._v("$store.state.d2admin.menu.header")]),t._v(" 作为数据源。"),a("router-link",{attrs:{to:"/zh/sys-vuex/menu.html#state-header"}},[t._v("API")])],1),t._v(" "),a("p",[t._v("侧栏数据使用 "),a("code",[t._v("$store.state.d2admin.menu.aside")]),t._v(" 作为数据源。"),a("router-link",{attrs:{to:"/zh/sys-vuex/menu.html#state-aside"}},[t._v("API")])],1),t._v(" "),a("h2",{attrs:{id:"设置菜单"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置菜单"}},[t._v("#")]),t._v(" 设置菜单")]),t._v(" "),a("p",[t._v("顶栏使用 "),a("code",[t._v("$store.commit('d2admin/menu/headerSet', menu)")]),t._v(" 更新数据源。"),a("router-link",{attrs:{to:"/zh/sys-vuex/menu.html#mutations-headerset"}},[t._v("API")])],1),t._v(" "),a("p",[t._v("侧栏使用 "),a("code",[t._v("$store.commit('d2admin/menu/asideSet', menu)")]),t._v(" 更新数据源。"),a("router-link",{attrs:{to:"/zh/sys-vuex/menu.html#mutations-asideset"}},[t._v("API")])],1),t._v(" "),a("p",[t._v("menu 的数据格式见 "),a("router-link",{attrs:{to:"/zh/sys-vuex/menu.html#mutations-headerset"}},[t._v("menu 数据格式")])],1),t._v(" "),a("h2",{attrs:{id:"菜单联动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#菜单联动"}},[t._v("#")]),t._v(" 菜单联动")]),t._v(" "),a("p",[t._v("首先请明确一点，D2Admin 完整版的菜单联动只是一个简单方案，不要拘泥于此演示，下面介绍完整版联动的实现帮助您更快速实现自己的联动方案：")]),t._v(" "),a("p",[t._v("设置数据源")]),t._v(" "),a("p",[t._v("在 "),a("code",[t._v("d2-admin/src/menu/index.js")]),t._v(" 中导出了两个变量，分别是：")]),t._v(" "),a("ul",[a("li",[t._v("menuAside 预备侧边栏菜单")]),t._v(" "),a("li",[t._v("menuHeader 顶栏菜单")])]),t._v(" "),a("p",[t._v("在 main.js 中使用下面的方式导入")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" menuHeader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" menuAside "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/menu'")]),t._v("\n")])])]),a("p",[t._v("menuHeader 在初始化根实例时在 created 生命周期直接赋值给顶栏菜单")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'d2admin/menu/headerSet'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" menuHeader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("然后在根实例中添加 $route.matched 的监听器")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("watch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'$route.matched'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("val"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" _side "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" menuAside"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("menu")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" menu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" val"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'d2admin/menu/asideSet'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _side"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" _side"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("这段代码的作用是当路由改变时，根据当前的路由找到 menuAside 中匹配当前路由对象中顶级路由的那个项目，并且赋值给侧边栏菜单达到联动效果。")]),t._v(" "),a("p",[t._v("您可以删除这部分代码，随意使用 vuex 中提供的顶栏和侧边栏菜单的设置方法来实现自己的菜单联动。")])])}),[],!1,null,null,null);s.default=e.exports}}]);